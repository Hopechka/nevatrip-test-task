# nevatrip-test-task

[Technical task-2](https://bitbucket.org/nevatrip/test-task/src/master/README.md)

## 1. Билеты на событие

### Вопрос 1.1:

**Events_table**

| id  | event_id |     event_date      | ticket_adult_price | ticket_adult_quantity | ticket_kid_price | ticket_kid_quantity | ticket_discount_price | ticket_discount_quantity | group_factor | ticket_option_price | ticket_option_quantity | barcode  | user_id | equal_price |       created       |
| :-: | :------: | :-----------------: | :----------------: | :-------------------: | :--------------: | :-----------------: | :-------------------: | :----------------------: | :----------: | :-----------------: | :--------------------: | :------: | :-----: | :---------: | :-----------------: |
|  1  |   003    | 2021-08-21 13:00:00 |        700         |           1           |       450        |          0          |          500          |            0             |      0       |        null         |           0            | 11111111 |  00451  |     700     | 2021-01-11 13:22:09 |
|  2  |   006    | 2021-07-29 18:00:00 |        1000        |           0           |       800        |          2          |          700          |            1             |      0       |        null         |           0            | 22222222 |  00364  |    2300     | 2021-01-12 16:32:08 |
|  3  |   003    | 2021-08-15 17:00:00 |        700         |           4           |       450        |          3          |          500          |            2             |      1       |        null         |           0            | 33333333 |  00015  |    4120     | 2021-01-13 10:08:45 |

Где

- `ticket_discount_price` - цена за льготный билет
- `ticket_discount_quantity` - количество льготных билетов
- `group_factor` - индикатор, является ли билет групповым. Проверяется на заданное условие(сумма всех билетов по строке текущего заказа), если сумма больше или равна заданному условию, возвращает 1(true), при этом алгоритом делает пересчет итоговой суммы с учетом заданного коэфициента.
  (для примера в таблице, в строке 3 использовала гупповой коэфициент равный 0.8)
- `ticket_option_price` - если будут появляться разовые типы билетов(специальные предложения например), в этот столбец можно внести индвидуальный прайс
- `ticket_option_quantity` - количество билетов со специальным предложением
- `user_id` - id заказа

### Вопрос 1.2:

**Tickets_table**

| id  | user_id |       ticket_type        | barcode_ticket |
| :-: | :-----: | :----------------------: | :------------: |
|  1  |  00015  |  ticket_adult_quantity   |   33333333-1   |
|  2  |  00015  |  ticket_adult_quantity   |   33333333-2   |
|  3  |  00015  |  ticket_adult_quantity   |   33333333-3   |
|  4  |  00015  |  ticket_adult_quantity   |   33333333-4   |
|  5  |  00015  |   ticket_kid_quantity    |   33333333-5   |
|  6  |  00015  |   ticket_kid_quantity    |   33333333-6   |
|  7  |  00015  |   ticket_kid_quantity    |   33333333-7   |
|  8  |  00015  | ticket_discount_quantity |   33333333-8   |
|  9  |  00015  | ticket_discount_quantity |   33333333-9   |

Где

- `id` - инкрементальный порядковый номер билета
- `user_id` - id заказа, присвоеное в таблице `Events_table`
- `ticket_type` - тип билета, наименование типа взято из шапки таблицы `Events_table` в соответствии с колонкой,
  строка дублируется столько раз, сколько указано в столбце с тем же названием в таблице `Events_table`
- `barcode_ticket` - основа для баркода взята из таблицы `Events_table` столбец `barcode`, для каждого билета формируется индивидуальный баркод исходя из общего количества билетов по заказу,
  к концу каждого основания баркода добавляется через дифис номер по порядку.


##  2. Время из A в B

* [Deploy](https://sprightly-jelly-d45ec7.netlify.app/)
* [Тестовое задание](https://bitbucket.org/nevatrip/test-task/src/master/README.md)
